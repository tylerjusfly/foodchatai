<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Chats</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-yellow-50 p-6">
    <div class="max-w-3xl mx-auto">
      <div class="mb-4">
        <button
          onclick="window.history.back()"
          class="absolute top-4 left-4 text-[#23536c] hover:text-[#317aa0] font-semibold flex items-center"
        >
          ‚Üê Back
        </button>
      </div>

      <h1 class="text-3xl font-bold mb-6 text-center">My Chats</h1>

      {{if .error}}
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative">
        <strong class="font-bold">Error:</strong>
        <span class="block sm:inline">{{.error}}</span>
      </div>
      {{else}} {{if .Chats}}
      <ul class="space-y-4">
        {{range .Chats}}
        <li class="bg-white rounded-xl p-4 shadow flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <!-- Circular avatar -->
            <img
              src="https://cdn-icons-png.flaticon.com/512/4712/4712027.png"
              alt="Avatar"
              class="w-14 h-14 rounded-full bg-orange-400 object-cover"
            />

            <!-- Chat info -->
            <div>
              <div class="text-lg font-semibold text-gray-800">{{.Title}}</div>
              <div class="text-sm text-gray-500">Delete chats in 1 hour</div>
              <!-- Dummy countdown -->
            </div>
          </div>

          <!-- Buttons -->
          <div class="flex space-x-2">
            <a href="/chat/{{.ID}}" class="px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm">View Chat</a>
            <form
              action="/chats/delete/{{.ID}}/?user={{.UserID}}"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this chat?');"
            >
              <button type="submit" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm">Delete</button>
            </form>
          </div>
        </li>
        {{end}}
      </ul>
      {{else}}
      <p class="text-center text-gray-600 mt-4">No chats found.</p>
      {{end}} {{end}}
    </div>
  </body>
</html>
